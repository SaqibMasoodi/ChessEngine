<!DOCTYPE html>
<html class="light" lang="en">
<!-- this is a ui preview -->

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Retro Tactile Chess Interface - Preview</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&amp;family=DM+Sans:wght@400;500;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "retro-cream": "#f3eada",
                        "retro-beige": "#eaddcf",
                        "retro-brown": "#8b5e3c",
                        "retro-terra": "#c16b46",
                        "retro-dark": "#4a3b32",
                        "retro-accent": "#d98e6d",
                        "paper-bg": "#fdfbf7",
                        "key-light": "#f0e6d6",
                        "key-shadow": "#cbbca8",
                    },
                    fontFamily: {
                        "typewriter": ["Courier Prime", "monospace"],
                        "ui": ["DM Sans", "sans-serif"]
                    },
                    boxShadow: {
                        "key": "0 4px 0 #cbbca8",
                        "key-pressed": "0 2px 0 #cbbca8, inset 0 2px 4px rgba(0,0,0,0.1)",
                        "board": "0 20px 40px -10px rgba(74, 59, 50, 0.3)",
                        "panel": "4px 4px 0 rgba(74, 59, 50, 0.1)",
                    },
                    borderRadius: {
                        "key": "0.8rem",
                    }
                },
            },
        }
    </script>
    <style>
        body {
            background-color: #e6dace;
            background-image:
                radial-gradient(#cbbca8 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .tactile-panel {
            background: #fdfbf7;
            border: 2px solid #eaddcf;
            box-shadow: 6px 6px 0 #dccbb5;
            border-radius: 1rem;
        }

        .tactile-btn {
            transition: all 0.1s ease;
            transform: translateY(0);
        }

        .tactile-btn:active {
            transform: translateY(4px);
            box-shadow: 0 0 0 transparent !important;
        }

        .chess-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            grid-template-rows: repeat(8, 1fr);
            gap: 2px;
            background: #8b5e3c;
            padding: 8px;
            border-radius: 12px;
            box-shadow: inset 2px 2px 10px rgba(0, 0, 0, 0.2);
        }

        .chess-square {
            border-radius: 6px;
            position: relative;
            transition: transform 0.1s;
            box-shadow: 0 3px 0 rgba(0, 0, 0, 0.1);
        }

        .chess-square:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 rgba(0, 0, 0, 0.1);
        }

        .square-light {
            background-color: #f3eada;
            color: #4a3b32;
        }

        .square-dark {
            background-color: #c16b46;
            color: #f3eada;
        }

        .piece-shadow {
            filter: drop-shadow(2px 4px 2px rgba(0, 0, 0, 0.25));
        }

        .typewriter-text {
            font-family: 'Courier Prime', monospace;
            letter-spacing: -0.02em;
        }

        .scrollbar-retro::-webkit-scrollbar {
            width: 8px;
        }

        .scrollbar-retro::-webkit-scrollbar-track {
            background: #f0e6d6;
            border-radius: 4px;
        }

        .scrollbar-retro::-webkit-scrollbar-thumb {
            background: #c16b46;
            border-radius: 4px;
            border: 2px solid #f0e6d6;
        }
    </style>
</head>

<body class="text-retro-dark h-screen overflow-hidden font-ui">
    <div class="relative flex h-full w-full flex-col">
        <!-- Compact Header -->
        <header
            class="flex items-center justify-between px-6 py-2 sticky top-0 z-50 bg-[#e6dace]/90 backdrop-blur-sm border-b border-[#dccbb5] shrink-0">
            <div class="flex items-center gap-3">
                <div class="text-retro-terra bg-retro-cream p-1.5 rounded-xl shadow-key border border-[#e6dace]">
                    <span class="material-symbols-outlined text-2xl">chess</span>
                </div>
                <h2 class="text-retro-dark text-lg font-bold tracking-tight typewriter-text">Retro<span
                        class="text-retro-terra">Chess</span></h2>
            </div>
            <div class="flex items-center gap-4">
                <nav
                    class="hidden md:flex items-center gap-1 bg-retro-cream/50 p-1 rounded-full border border-white/50">
                    <a class="px-3 py-1 rounded-full bg-retro-terra text-white shadow-sm text-xs font-bold"
                        href="#">Play</a>
                    <a class="px-3 py-1 rounded-full text-retro-dark/70 hover:text-retro-terra hover:bg-white/50 transition-colors text-xs font-medium"
                        href="#">Puzzles</a>
                    <a class="px-3 py-1 rounded-full text-retro-dark/70 hover:text-retro-terra hover:bg-white/50 transition-colors text-xs font-medium"
                        href="#">Academy</a>
                    <a class="px-3 py-1 rounded-full text-retro-dark/70 hover:text-retro-terra hover:bg-white/50 transition-colors text-xs font-medium"
                        href="#">Watch</a>
                </nav>
                <div class="flex gap-2">
                    <button
                        class="tactile-btn flex size-8 items-center justify-center rounded-full bg-retro-cream border-b-2 border-[#cbbca8] hover:bg-white transition-colors text-retro-brown">
                        <span class="material-symbols-outlined text-lg">settings</span>
                    </button>
                    <button
                        class="tactile-btn flex size-8 items-center justify-center rounded-full bg-retro-cream border-b-2 border-[#cbbca8] hover:bg-white transition-colors text-retro-brown">
                        <span class="material-symbols-outlined text-lg">notifications</span>
                    </button>
                    <div
                        class="size-8 rounded-full border-2 border-retro-cream shadow-md overflow-hidden ring-1 ring-retro-brown/20">
                        <img alt="Profile" class="w-full h-full object-cover sepia-[.3]" data-alt="User profile avatar"
                            src="https://lh3.googleusercontent.com/aida-public/AB6AXuAGSCH1IKwBnimB9GsN8hNUh0kunpiuDXSljap80YHXF3j5ItT_asIsJFJoxRYYe3vER_x5W2MtJ8zW7L5cGvya5Ik_WfyO7LlaF5TLauyTuF6Jy3hmUNufzX7NAhU-ghsCXkprK9PWKQ_lSrrOyB5Y8m5EfXaBJpsmjs7f2EZHY3AWyd2gmh_4dIGTrEgzbRG5DhxD4ASJt0MbbhCElYRI3w1Qkf_o8dde554mx9twTOjY9MdvICuPA2TcDK9dI4WjWqz2J-W0Rk8" />
                        src="https://lh3.googleusercontent.com/aida-public/AB6AXuAGSCH1IKwBnimB9GsN8hNUh0kunpiuDXSljap80YHXF3j5ItT_asIsJFJoxRYYe3vER_x5W2MtJ8zW7L5cGvya5Ik_WfyO7LlaF5TLauyTuF6Jy3hmUNufzX7NAhU-ghsCXkprK9PWKQ_lSrrOyB5Y8m5EfXaBJpsmjs7f2EZHY3AWyd2gmh_4dIGTrEgzbRG5DhxD4ASJt0MbbCBEIYRI3w1Qkf_o8dde554mx9twTOjY9MdvICuPA2TcDK9dI4WjWqz2J-W0Rk8"
                        />
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content with automatic sizing -->
        <main class="flex-1 flex flex-col items-center justify-center p-2 lg:p-4 min-h-0 overflow-hidden">
            <div class="flex flex-col lg:flex-row gap-4 h-full w-full max-w-[1600px] justify-center items-stretch">

                <!-- Left Column: Player Panels -->
                <div class="flex flex-col justify-between h-[90vh] max-h-[900px] py-2 shrink-0 w-[280px]">
                    <!-- Top Player (Player 2) -->
                    <div class="flex items-center justify-between tactile-panel px-4 py-3 w-full">
                        <div class="flex items-center gap-3">
                            <div class="relative">
                                <img alt="Player 2"
                                    class="size-10 rounded-lg border-2 border-retro-cream shadow-sm sepia-[.2]"
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuCGoUvzHze79KgKlQmm1T7g63yrZx1H8-lf5vv8BvF0PMJWdt5GNeWuP315PPRAOSNB4QjeYoWZ_Q5y7pXIcabZ2wbbp0tyrWDbGo9m3l7aEghJ68rnLC-m8GA6F5uImf7ppoLMlV2WwVQIcybeNR4KmWiOJ5MTmbm-aJKQKsoZ2ljgQmh7D4CCa6FOhwcXXPWN_M8BKm3zkZcgV1osZqXCLnoEgfZQ29HZVwV5CovmP9GTxZHP_DR9Jf7IBhOAeLB5qbw6LhUHLqA" />
                            </div>
                            <div>
                                <h3 class="font-bold text-sm text-retro-dark typewriter-text leading-tight">Player 2
                                </h3>
                                <p class="text-retro-brown/70 text-xs font-ui">Rating: 2845</p>
                            </div>
                        </div>
                        <div
                            class="bg-retro-dark text-retro-cream px-3 py-1 rounded-md font-typewriter text-xl shadow-inner border border-white/10">
                            04:12
                        </div>
                    </div>

                    <!-- Bottom Player (Player 1) -->
                    <div
                        class="flex items-center justify-between tactile-panel px-4 py-3 border-l-4 border-retro-terra w-full">
                        <div class="flex items-center gap-3">
                            <div class="relative">
                                <img alt="Player 1"
                                    class="size-10 rounded-lg border-2 border-retro-terra shadow-sm sepia-[.2]"
                                    src="https://lh3.googleusercontent.com/aida-public/AB6AXuAMVrEx8yejnXAf_rTQ8FpeKqQ5V1hhUxpYa2lQPKaom0xmpEclwV9YdxSmcquN8hOmj4SdJsE4g8QeoIXoYmZJBUG7zh6KPOHPNEzJLc4WPkWVAfBGYYM3xUlsGbZy-OXxIUo5tHdk2CIjLbl4mbnkoNJwhkSZ8y78kuDHLrlEK6rc01kGTkJ8SMsv__ZhbPdFombJz51e3vygkHieIv1_YamjPbB6mPlm95fEJBmvtyGauLXTCJE_Uqi95rzTYx6bYkuxEecW4p0" />
                            </div>
                            <div>
                                <h3 class="font-bold text-sm text-retro-dark typewriter-text leading-tight">Player 1
                                </h3>
                                <p class="text-retro-brown/70 text-xs font-ui">Rating: 2840</p>
                            </div>
                        </div>
                        <div class="flex flex-col items-end">
                            <div
                                class="bg-retro-terra text-white px-3 py-1 rounded-md font-typewriter text-xl shadow-lg border border-white/20">
                                03:45
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Center Area: Board Only (Full Height) -->
                <div class="flex flex-col justify-center items-center flex-1 min-w-0">
                    <!-- BOARD -->
                    <div
                        class="relative aspect-square h-[90vh] max-h-[900px] shadow-board bg-[#6d4c35] p-3 rounded-[12px] border-b-8 border-[#4a3224]">
                        <div class="chess-grid w-full h-full" id="board">
                            <!-- JS Generated -->
                        </div>
                        <!-- Coordinates -->
                        <div
                            class="absolute inset-y-0 -left-6 flex flex-col justify-around py-3 text-[10px] font-bold text-retro-brown/40 font-typewriter">
                            <span>8</span><span>7</span><span>6</span><span>5</span><span>4</span><span>3</span><span>2</span><span>1</span>
                        </div>
                        <div
                            class="absolute inset-x-0 -bottom-6 flex justify-around px-3 text-[10px] font-bold text-retro-brown/40 font-typewriter">
                            <span>a</span><span>b</span><span>c</span><span>d</span><span>e</span><span>f</span><span>g</span><span>h</span>
                        </div>
                    </div>
                </div>

                <!-- Right Sidebar (Fixed Width, Full Height) -->
                <div class="flex flex-col gap-3 w-full lg:w-[400px] shrink-0 h-full">

                    <!-- Sidebar Main Panel -->
                    <div class="tactile-panel flex flex-col flex-1 min-h-0 overflow-hidden">
                        <!-- Tabs -->
                        <div class="flex border-b border-[#dccbb5] bg-[#eaddcf]">
                            <button
                                class="flex-1 py-3 text-xs font-bold uppercase tracking-wider text-retro-dark bg-white/40 border-r border-[#dccbb5]">Moves</button>
                            <button
                                class="flex-1 py-3 text-xs font-bold uppercase tracking-wider text-retro-brown/60 hover:bg-white/20 transition-colors border-r border-[#dccbb5]">Info</button>
                            <button
                                class="flex-1 py-3 text-xs font-bold uppercase tracking-wider text-retro-brown/60 hover:bg-white/20 transition-colors">Chat</button>
                        </div>

                        <!-- Move List content -->
                        <div class="flex-1 flex flex-col bg-paper-bg min-h-0 relative">
                            <div class="absolute inset-0 overflow-y-auto scrollbar-retro p-2">
                                <table class="w-full text-sm font-typewriter text-retro-dark" id="move-list">
                                    <tbody class="divide-y divide-retro-brown/10">
                                        <!-- Moves -->
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Analysis Widget embedded in sidebar like ref -->
                        <div class="p-3 bg-retro-cream/50 border-t border-[#dccbb5]">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-[10px] font-bold uppercase text-retro-brown">Evaluation</span>
                                <span class="text-xs font-mono font-bold text-retro-dark" id="eval-text">+0.00</span>
                            </div>
                            <div class="h-1.5 w-full bg-[#dccbb5] rounded-full overflow-hidden">
                                <div id="eval-bar" class="h-full bg-retro-terra transition-all duration-300"
                                    style="width: 50%"></div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="p-3 grid grid-cols-2 gap-2 bg-[#eaddcf]/30 border-t border-[#dccbb5]">
                            <button
                                class="tactile-btn flex items-center justify-center gap-2 h-10 rounded-key bg-key-light text-retro-brown shadow-key font-bold text-xs tracking-wide border border-white uppercase hover:bg-white active:shadow-none active:translate-y-[2px] transition-all">
                                <span class="material-symbols-outlined text-lg">flag</span> Draw
                            </button>
                            <button
                                class="tactile-btn flex items-center justify-center gap-2 h-10 rounded-key bg-[#dcaea1] text-[#7a2e2e] shadow-[0_2px_0_#b07f71] font-bold text-xs tracking-wide border border-white uppercase hover:brightness-110 active:shadow-none active:translate-y-[2px] transition-all">
                                <span class="material-symbols-outlined text-lg">block</span> Resign
                            </button>
                        </div>

                        <!-- Nav Buttons (mimicking Reference bottom nav) -->
                        <div class="flex border-t border-[#dccbb5]">
                            <button class="flex-1 py-3 hover:bg-white/50 transition-colors text-retro-brown"><span
                                    class="material-symbols-outlined text-xl">first_page</span></button>
                            <button class="flex-1 py-3 hover:bg-white/50 transition-colors text-retro-brown"><span
                                    class="material-symbols-outlined text-xl">chevron_left</span></button>
                            <button class="flex-1 py-3 hover:bg-white/50 transition-colors text-retro-brown"><span
                                    class="material-symbols-outlined text-xl">chevron_right</span></button>
                            <button class="flex-1 py-3 hover:bg-white/50 transition-colors text-retro-brown"><span
                                    class="material-symbols-outlined text-xl">last_page</span></button>
                            <button class="flex-1 py-3 hover:bg-white/50 transition-colors text-retro-brown"><span
                                    class="material-symbols-outlined text-xl">flip_camera_android</span></button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <!-- Footer -->
    <footer
        class="bg-[#4a3b32] py-2 px-6 flex justify-between items-center text-[10px] text-[#eaddcf]/60 font-bold uppercase tracking-[0.2em] border-t-2 border-[#3a2e26] shrink-0">
        <div class="flex gap-4">
            <span>Space: Analysis</span>
        </div>
        <div class="flex items-center gap-2">
            <span class="size-1.5 rounded-full bg-green-500/50"></span>
            24ms
        </div>
    </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const boardElement = document.getElementById('board');
            let selectedSquare = null;

            // Generate Board Grid
            for (let r = 0; r < 8; r++) {
                for (let c = 0; c < 8; c++) {
                    const isLight = (r + c) % 2 === 0;
                    const sq = document.createElement('div');
                    sq.className = `chess-square ${isLight ? 'square-light' : 'square-dark'} flex items-center justify-center`;
                    sq.id = `sq-${r}-${c}`;
                    sq.dataset.row = r;
                    sq.dataset.col = c;

                    sq.addEventListener('click', () => {
                        // Visual selection only for preview
                        if (selectedSquare) {
                            selectedSquare.classList.remove('ring-4', 'ring-retro-terra', 'ring-inset');
                        }
                        selectedSquare = sq;
                        sq.classList.add('ring-4', 'ring-retro-terra', 'ring-inset');
                        console.log(`Clicked square: ${r}, ${c}`);
                    });

                    boardElement.appendChild(sq);
                }
            }

            // Initial FEN for preview
            const initialFen = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";
            renderBoard(initialFen);

            function renderBoard(fen) {
                const fenBoard = fen.split(' ')[0];
                const rows = fenBoard.split('/');
                const squares = document.querySelectorAll('.chess-square');
                squares.forEach(sq => sq.innerHTML = '');

                let squareIndex = 0;
                for (let r = 0; r < 8; r++) {
                    let rowStr = rows[r];
                    for (let i = 0; i < rowStr.length; i++) {
                        const char = rowStr[i];
                        if (!isNaN(char)) {
                            squareIndex += parseInt(char);
                        } else {
                            if (squareIndex < squares.length) {
                                updateSquare(squares[squareIndex], char);
                                squareIndex++;
                            }
                        }
                    }
                }
            }

            function updateSquare(element, pieceChar) {
                if (!pieceChar) return;
                const pieceMap = {
                    'p': 'chess_pawn', 'r': 'chess_rook', 'n': 'chess_knight',
                    'b': 'chess_bishop', 'q': 'chess_queen', 'k': 'chess_king'
                };
                const key = pieceChar.toLowerCase();
                const pieceName = pieceMap[key];
                const isWhite = (pieceChar === pieceChar.toUpperCase());

                if (pieceName) {
                    const span = document.createElement('span');
                    span.className = "material-symbols-outlined text-[8vh] piece-shadow select-none cursor-pointer leading-none";
                    span.innerText = pieceName;
                    if (isWhite) {
                        span.style.color = '#fffcf5';
                        span.style.textShadow = '0 2px 0 rgba(0,0,0,0.2)';
                    } else {
                        span.style.color = '#382b22';
                        span.style.textShadow = '0 1px 0 rgba(255,255,255,0.1)';
                    }
                    element.appendChild(span);
                }
            }
        });
    </script>
</body>

</html>

